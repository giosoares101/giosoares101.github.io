<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');d.add('dark');if("system"===e||(!e&&false)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>Firebase - Authentication and Database</title><meta name="robots" content="follow, index"/><meta name="description" content="Basics of using Firebase for authentication and database storage. Covers how to set up a project, create a database, and authenticate users in a React app."/><meta property="og:url" content="https://giosoares1010.github.io//blog/firebase"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Giovanni Soares"/><meta property="og:description" content="Basics of using Firebase for authentication and database storage. Covers how to set up a project, create a database, and authenticate users in a React app."/><meta property="og:title" content="Firebase - Authentication and Database"/><meta property="og:image" content="https://giosoares1010.github.io//static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="Firebase - Authentication and Database"/><meta name="twitter:description" content="Basics of using Firebase for authentication and database storage. Covers how to set up a project, create a database, and authenticate users in a React app."/><meta name="twitter:image" content="https://giosoares1010.github.io//static/images/twitter-card.png"/><link rel="canonical" href="https://giosoares1010.github.io//blog/firebase"/><meta property="article:published_time" content="2022-10-27T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://giosoares1010.github.io//blog/firebase"
  },
  "headline": "Firebase - Authentication and Database",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://giosoares1010.github.io//static/images/twitter-card.png"
    }
  ],
  "datePublished": "2022-10-27T00:00:00.000Z",
  "dateModified": "2022-10-27T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Giovanni Soares"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Giovanni Soares",
    "logo": {
      "@type": "ImageObject",
      "url": "https://giosoares1010.github.io//static/images/logo.png"
    }
  },
  "description": "Basics of using Firebase for authentication and database storage. Covers how to set up a project, create a database, and authenticate users in a React app."
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/911b0e6eb2decf42.css" as="style"/><link rel="stylesheet" href="/_next/static/css/911b0e6eb2decf42.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-5f80f3076149bc7d.js" defer=""></script><script src="/_next/static/chunks/main-7b3ba9bf4f28f1fe.js" defer=""></script><script src="/_next/static/chunks/pages/_app-1821d4593212f6ce.js" defer=""></script><script src="/_next/static/chunks/675-70b09cbf0a5309ea.js" defer=""></script><script src="/_next/static/chunks/774-12915c1efed9eab5.js" defer=""></script><script src="/_next/static/chunks/833-344f4ccb1d4a2701.js" defer=""></script><script src="/_next/static/chunks/712-3a60af71b44f7f34.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-832cad689911973f.js" defer=""></script><script src="/_next/static/wwF2HbjoMRtoMasqAJl2E/_buildManifest.js" defer=""></script><script src="/_next/static/wwF2HbjoMRtoMasqAJl2E/_ssgManifest.js" defer=""></script><script src="/_next/static/wwF2HbjoMRtoMasqAJl2E/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-6"><div><a aria-label="Gio Soares&#x27;s website" class="hover:dark:text-primary-color-dark hover:text-primary-color p-1 font-serif font-medium text-2xl text-gray-900 dark:text-gray-100 sm:p-4" href="/">Giovanni Soares</a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="hover:dark:text-primary-color-dark hover:text-primary-color p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a><a class="hover:dark:text-primary-color-dark hover:text-primary-color p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">Projects</a><a class="hover:dark:text-primary-color-dark hover:text-primary-color p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="hover:dark:text-primary-color-dark hover:text-primary-color p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div><div class="px-12 py-4"><a class="text-2xl tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2022-10-27T00:00:00.000Z">Wednesday, October 26, 2022</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Firebase - Authentication and Database</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" src="/static/images/photo.jpg" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Giovanni Soares</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><h1 id="firebase-configuration"><a href="#firebase-configuration" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Firebase Configuration</h1><p>It&#x27;s a good idea to create a separate file for your Firebase configuration. This will keep your Firebase credentials secure and out of your code. You can create a new file in your <code>src</code> folder called <code>firebaseUtils.js</code>. This file will contain your Firebase configuration.</p><p>Install the Firebase SDK for React.</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token function">npm</span> <span class="token function">install</span> firebase
</span></code></pre></div><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> initializeApp <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;firebase/app&#x27;</span>
</span><span class="code-line"><span class="token comment">// initialize the app and create the Firebase App object</span>
</span><span class="code-line"><span class="token keyword">const</span> firebaseConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token literal-property property">apiKey</span><span class="token operator">:</span> <span class="token comment">// ... put in your Firebase config here after creating a project</span>
</span><span class="code-line">  <span class="token literal-property property">authDomain</span><span class="token operator">:</span> <span class="token comment">// ...</span>
</span><span class="code-line">  <span class="token literal-property property">projectId</span><span class="token operator">:</span> <span class="token comment">// ...</span>
</span><span class="code-line">  <span class="token literal-property property">storageBucket</span><span class="token operator">:</span> <span class="token comment">// ...</span>
</span><span class="code-line">  <span class="token literal-property property">messagingSenderId</span><span class="token operator">:</span> <span class="token comment">// ...</span>
</span><span class="code-line">  <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token comment">// Initialize Firebase</span>
</span><span class="code-line"><span class="token keyword">const</span> firebaseApp <span class="token operator">=</span> <span class="token function">initializeApp</span><span class="token punctuation">(</span>firebaseConfig<span class="token punctuation">)</span>
</span></code></pre></div><h2 id="authentication"><a href="#authentication" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Authentication</h2><p>You can use authentication in a number of ways. You can use email and password, Google, Facebook, Twitter, and more. You can also use authentication with a custom backend. For this example, I will use email and password authentication.</p><p>You can configure an option in the Firebase console in the Authentication section under &#x27;Sign-in method&#x27;.</p><h3 id="authenticate-using-google"><a href="#authenticate-using-google" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Authenticate Using Google</h3><p>You can use Google authentication to allow users to sign in with their Google account.</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// import the GoogleAuthProvider</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">GoogleAuthProvider</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;firebase/auth&#x27;</span>
</span><span class="code-line"><span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GoogleAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">googleProvider<span class="token punctuation">.</span><span class="token function property-access method">setCustomParameters</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">prompt</span><span class="token operator">:</span> <span class="token string">&#x27;select_account&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre></div><blockquote><p>The provider is a GoogleAuthProvider object. You can use this object to set custom parameters. In this case, I am setting the prompt to &#x27;select_account&#x27; so that the user is prompted to select their account if they are already signed in to multiple Google accounts. You will also need a few other functions from the <code>firebase/auth</code> package.</p></blockquote><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token punctuation">{</span>
</span><span class="code-line">  getAuth<span class="token punctuation">,</span> <span class="token comment">// create an instance of the auth service</span>
</span><span class="code-line">  signInWithPopup<span class="token punctuation">,</span> <span class="token comment">// sign in with a popup window</span>
</span><span class="code-line">  signInWithRedirect<span class="token punctuation">,</span> <span class="token comment">// sign in with a redirect - requires some additional configuration</span>
</span><span class="code-line">  <span class="token maybe-class-name">GoogleAuthProvider</span><span class="token punctuation">,</span> <span class="token comment">// the GoogleAuthProvider class</span>
</span><span class="code-line">  createUserWithEmailAndPassword<span class="token punctuation">,</span> <span class="token comment">// create a user with email and password</span>
</span><span class="code-line">  signInWithEmailAndPassword<span class="token punctuation">,</span> <span class="token comment">// sign in with email and password</span>
</span><span class="code-line">  signOut<span class="token punctuation">,</span> <span class="token comment">// sign out</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">&#x27;firebase/auth&#x27;</span>
</span><span class="code-line"><span class="token comment">// time to create the auth instance and use it to sign in with Google</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function function-variable">signInWithGooglePopup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token function">signInWithPopup</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> googleProvider<span class="token punctuation">)</span> <span class="token comment">// sign in with a popup window</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function function-variable">signInWithGoogleRedirect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token function">signInWithRedirect</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> googleProvider<span class="token punctuation">)</span> <span class="token comment">// sign in with a redirect</span>
</span></code></pre></div><blockquote><p>You can use these inside other components to sign in with Google.</p></blockquote><h4 id="using-the-redirect-method"><a href="#using-the-redirect-method" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Using the redirect method</h4><p>When you redirect a user to a new page and then back to your app, you need to handle the results of the redirect. This was done by using <code>useEffect</code> and the <code>getRedirectResult</code> method.</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> setCurrentUser <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">UserContext</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token comment">// created a context to store the current user</span>
</span><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token function function-variable">handleRedirectResult</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// get the redirect result from the signInWithGoogleRedirect() function</span>
</span><span class="code-line">    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">getRedirectResult</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// create a user document in the firestore database</span>
</span><span class="code-line">      <span class="token function">createUserDocumentFromAuth</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token comment">// set the current user in the UserContext</span>
</span><span class="code-line">      <span class="token function">setCurrentUser</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token function">handleRedirectResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable">signInGoogleRedirectUser</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">signInWithGoogleRedirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token comment">// triggers the useEffect() hook above</span>
</span><span class="code-line">  <span class="token keyword control-flow">await</span> <span class="token function">createUserDocumentFromAuth</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token comment">// gets called when the user clicks the button to sign in with Google</span>
</span></code></pre></div><blockquote><p>This was done in a separate component called <code>Authenticate.jsx</code>.</p></blockquote><h4 id="signing-in-with-email-and-password"><a href="#signing-in-with-email-and-password" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Signing in with email and password</h4><p>Is similar to signing in with Google. You will need to import the <code>signInAuthUserWithEmailAndPassword</code> functions from your <code>firebaseUtils.js</code> file.</p><p>Recall, the <code>signInAuthUserWithEmailAndPassword</code> function is defined as follows:</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// Sign in with Firebase using Password-Based Accounts</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function function-variable">signInAuthUserWithEmailAndPassword</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>email <span class="token operator">||</span> <span class="token operator">!</span>password<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token keyword control-flow">await</span> <span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>Back in your <code>Authenticate.jsx</code> component:</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token punctuation">{</span>
</span><span class="code-line">  auth<span class="token punctuation">,</span> <span class="token comment">// the auth instance</span>
</span><span class="code-line">  signInWithGoogleRedirect<span class="token punctuation">,</span> <span class="token comment">// sign in with a redirect</span>
</span><span class="code-line">  signInAuthUserWithEmailAndPassword<span class="token punctuation">,</span> <span class="token comment">// sign in with email and password</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">&#x27;../utils/firebase/firebaseUtils&#x27;</span>
</span><span class="code-line"><span class="token comment">// called when the user submits the form</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  e<span class="token punctuation">.</span><span class="token function property-access method">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// sign in with email and password</span>
</span><span class="code-line">    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">signInAuthUserWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">resetFormFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token class-name console">console</span><span class="token punctuation">.</span><span class="token function property-access method">log</span><span class="token punctuation">(</span><span class="token string">&#x27;successful sign in ✅ &#x27;</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token function">setCurrentUser</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token class-name console">console</span><span class="token punctuation">.</span><span class="token function property-access method">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token comment">// error handling</span>
</span><span class="code-line">    <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">case</span> <span class="token string">&#x27;auth/user-not-found&#x27;</span><span class="token operator">:</span>
</span><span class="code-line">        <span class="token function">setErrorText</span><span class="token punctuation">(</span><span class="token string">&#x27;No existing user found with that email address&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token function">setErrorText</span><span class="token punctuation">(</span><span class="token keyword nil null">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token keyword control-flow">break</span>
</span><span class="code-line">      <span class="token keyword">case</span> <span class="token string">&#x27;auth/wrong-password&#x27;</span><span class="token operator">:</span>
</span><span class="code-line">        <span class="token function">setErrorText</span><span class="token punctuation">(</span><span class="token string">&#x27;Incorrect password&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token function">setErrorText</span><span class="token punctuation">(</span><span class="token keyword nil null">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token keyword control-flow">break</span>
</span><span class="code-line">      <span class="token keyword module">default</span><span class="token operator">:</span>
</span><span class="code-line">        <span class="token function">setErrorText</span><span class="token punctuation">(</span><span class="token string">&#x27;Something went wrong&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>The <code>handleSubmit</code> function gets called when the user submits the form. It will call the <code>signInAuthUserWithEmailAndPassword</code> function. It takes in the email and password from the form.</p><p>If the user is successfully signed in, the <code>setCurrentUser</code> function will be called. This will set the current user in the UserContext.</p><p>I have created a few <code>switch</code> cases to handle errors, but this is not necessary. You can just use the <code>error.message</code> property to display the error message.</p><h2 id="signing-up-with-email-and-password---creating-a-new-user"><a href="#signing-up-with-email-and-password---creating-a-new-user" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Signing Up with email and password - Creating a new user</h2><p>You may need to create a new user for your application.</p><p>Very very similar to signing in with email and password. You will need to import the <code>createAuthUserWithEmailAndPassword</code> and <code>createUserDocumentFromAuth</code> function from your <code>firebaseUtils.js</code> file.</p><p>I created a new component to handle signing up and named it <code>SignUp.jsx</code>.</p><p>We need to import the `c</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token punctuation">{</span>
</span><span class="code-line">  createAuthUserWithEmailAndPassword<span class="token punctuation">,</span> <span class="token comment">// create a user with email and password</span>
</span><span class="code-line">  createUserDocumentFromAuth<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">&#x27;../utils/firebase/firebaseUtils&#x27;</span>
</span><span class="code-line"><span class="token comment">// gets called when the user submits the form</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  e<span class="token punctuation">.</span><span class="token function property-access method">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">createAuthUserWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// create a user document in the firestore database</span>
</span><span class="code-line">      <span class="token comment">// also pass the displayName from the form. This is passed as an additionalInformationObj to the createUserDocumentFromAuth() function</span>
</span><span class="code-line">      <span class="token keyword control-flow">await</span> <span class="token function">createUserDocumentFromAuth</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> displayName <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token class-name console">console</span><span class="token punctuation">.</span><span class="token function property-access method">log</span><span class="token punctuation">(</span><span class="token string">&#x27;successful sign up ✅ &#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token function">setCurrentUser</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">case</span> <span class="token string">&#x27;auth/email-already-in-use&#x27;</span><span class="token operator">:</span>
</span><span class="code-line">        <span class="token function">setErrorText</span><span class="token punctuation">(</span><span class="token string">&#x27;Email already in use&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token keyword control-flow">break</span>
</span><span class="code-line">      <span class="token keyword">case</span> <span class="token string">&#x27;auth/invalid-email&#x27;</span><span class="token operator">:</span>
</span><span class="code-line">        <span class="token function">setErrorText</span><span class="token punctuation">(</span><span class="token string">&#x27;Invalid email&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token keyword control-flow">break</span>
</span><span class="code-line">      <span class="token keyword">case</span> <span class="token string">&#x27;auth/weak-password&#x27;</span><span class="token operator">:</span>
</span><span class="code-line">        <span class="token function">setErrorText</span><span class="token punctuation">(</span><span class="token string">&#x27;Password is too weak&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token keyword control-flow">break</span>
</span><span class="code-line">      <span class="token keyword module">default</span><span class="token operator">:</span>
</span><span class="code-line">        <span class="token function">setErrorText</span><span class="token punctuation">(</span><span class="token string">&#x27;Something went wrong&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">setErrorText</span><span class="token punctuation">(</span><span class="token keyword nil null">null</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token class-name console">console</span><span class="token punctuation">.</span><span class="token function property-access method">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h2 id="observable-listener"><a href="#observable-listener" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Observable Listener</h2><p>Is a function that listens for changes in the authentication state. It will be called every time the authentication state changes. Our code is getting a little messy.</p><p>We can use the <code>onAuthStateChanged</code> function to listen for changes in the authentication state. This function will be called every time the authentication state changes.</p><p>Read more about the <code>onAuthStateChanged</code> function <a target="_blank" rel="noopener noreferrer" href="https://firebase.google.com/docs/reference/js/firebase.auth.Auth#onauthstatechanged">here</a>.</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// inside firebaseUtils.js</span>
</span><span class="code-line"><span class="token comment">// observer - Adds an observer for changes to the user&#x27;s sign-in state.</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function function-variable">onAuthStateChangedListener</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token function">onAuthStateChanged</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</span></code></pre></div><p>Will import this in our <code>userContext</code> file. We want to run the <code>onAuthStateChangedListener</code> function when the app loads. We will do this in the <code>UserProvider</code> component by using the <code>useEffect</code> hook.</p><p>We use can run the callback method whenever out <code>auth</code> state changes. This will be called every time the authentication state changes. So when a user signs in or signs out, this callback function will be called.</p><p>The <code>onAuthStateChanged</code> is <strong>always</strong> listening for changes in the authentication state. You need this to unmount</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// inside userContext.js</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> onAuthStateChangedListener <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;../utils/firebase/firebaseUtils&#x27;</span>
</span><span class="code-line"><span class="token comment">// the actual value of the context is an object</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">UserContext</span> <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token literal-property property">currentUser</span><span class="token operator">:</span> <span class="token keyword nil null">null</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token function function-variable">setCurrentUser</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token keyword nil null">null</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token comment">// provider component</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function function-variable"><span class="token maybe-class-name">UserProvider</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// the initial state of the user context, base, empty state</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>currentUser<span class="token punctuation">,</span> setCurrentUser<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword nil null">null</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token comment">// allows you to pass the getter and setter functions to the children components</span>
</span><span class="code-line">  <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">{</span> currentUser<span class="token punctuation">,</span> setCurrentUser <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// onAuthStateChangedListener() is a function that returns an unsubscribe function</span>
</span><span class="code-line">    <span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> <span class="token function">onAuthStateChangedListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">setCurrentUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> unsubscribe <span class="token comment">// unsubscribe from the listener when the component unmounts</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token operator">&lt;</span><span class="token maybe-class-name">UserContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span> value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">UserContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span><span class="token operator">&gt;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>We are going to modify our code to use the <code>onAuthStateChangedListener</code> function. We will use the <code>onAuthStateChangedListener</code> function to set the current user in the <code>UserContext</code>.</p><p>We can remove all references to the <code>setCurrentUser</code> function from our <code>Authenticate.jsx</code> and <code>SignUp.jsx</code> components because we are using the <code>onAuthStateChangedListener</code> function to set the current user in the <code>UserContext</code>.</p><p>We know when a user signs in, the <code>onAuthStateChangedListener</code> function will be called, the callback <code>(user) =&gt; {setCurrentUser(user)}</code> will be called. This will set the current user in the <code>UserContext</code>.</p><p>If a user signs out, the <code>onAuthStateChangedListener</code> function will be called, the callback <code>(user) =&gt; {setCurrentUser(user)}</code> will be called. This will set the current user in the <code>UserContext</code> to <code>null</code>.</p><p>Why would you do this?</p><p>You can use the <code>onAuthStateChanged</code> function to centralize all the user authentication logic into the <code>UserContext</code> file. This will make your code cleaner and easier to maintain. We are not needing to pass the <code>setCurrentUser</code> function down to the child components. We simply use the <code>onAuthStateChanged</code> function to set the current user in the <code>UserContext</code>.</p><h4 id="observer-pattern"><a href="#observer-pattern" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Observer Pattern</h4><p>Think of the <code>onAuthStateChanged</code> as a stream, a sequence of events in order of time. There is a variable, unknown number of time between events.</p><p>We can use a listener to listen for changes in the authentication state. We can use the <code>onAuthStateChanged</code> function to listen for changes in the authentication state. This function will be called every time the authentication state changes.</p><p>The listener has three key methods:</p><ul><li><code>next</code> - is called every time a new event is emitted. It points to the callback function.</li><li><code>error</code> - is called when an error occurs. It points to the error callback function.</li><li><code>complete</code> - is called when the stream is has ended. You can use this to do something when finished.</li></ul><p>So, we need a way to subscribe the listener to the stream. We want to run the <code>next</code> method every time a new event is emitted. However, by the time we subscribe to the stream, the stream may have already emitted some events.</p><div class="flex justify-center"><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27763%27%20height=%27105%27/%3e"/></span><img alt="streams" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="streams" src="/static/images/steams.svg" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div></div><p>This is a pretty simple logic. Once we get an event, we fire <code>next</code>. Once we run the <code>complete</code> method, we unsubscribe from the stream.</p><p>We see this in our <code>UserContext</code> file. We are using the <code>useEffect</code> hook to run the <code>onAuthStateChangedListener</code> function. This function will be called every time the authentication state changes.</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// onAuthStateChangedListener() is a function that returns an unsubscribe function</span>
</span><span class="code-line">  <span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> <span class="token function">onAuthStateChangedListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">createUserDocumentFromAuth</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token comment">// set the current user in the UserContext</span>
</span><span class="code-line">    <span class="token function">setCurrentUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token comment">// clean up function</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> unsubscribe <span class="token comment">// unsubscribe from the listener when the component unmounts</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span></code></pre></div><h1 id="firestore-database"><a href="#firestore-database" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Firestore Database</h1><p>It&#x27;s a bad idea to store large amounts of data on the front end. We can use Firestore, a NoSQL database, to store our data.</p><h2 id="general-structure-of-a-firestore-database"><a href="#general-structure-of-a-firestore-database" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>General Structure of a Firestore Database</h2><p>In general, we have two types of databases:</p><table><thead><tr><th>Relational Database (SQL)</th><th>NoSQL Database</th></tr></thead><tbody><tr><td>Data is stored in tables</td><td>Data is stored in collections</td></tr><tr><td>Data is related to each</td><td>Data is not related to each other</td></tr><tr><td>Data is structured. Each item in a table will have the same shape.</td><td>Data is not structured. Documents can have different shapes.</td></tr><tr><td>PostgreSQL, MySQL, Supabase</td><td>MongoDB, Firestore</td></tr></tbody></table><p>In a NoSQL database, we have collections and documents. A collection is a group of documents. A document is a single record.</p><p>We can easily add any property to a document. We can add a new property to a document without having to change the structure of the document.</p><div class="flex justify-center"><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272098%27%20height=%271610%27/%3e"/></span><img alt="adding to NoSQL" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="adding to NoSQL" src="/static/images/firestore-1.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div></div><p>WHen using a NoSQL database you need to think about how you are going to structure your data. You need to think about how you are going to query your data.For example, in order to predictably map over a collection of documents, you need to ensure the documents have the same shape. If you don&#x27;t have the same shape, you will need to do some extra work to map over the collection.</p><h2 id="uploading-data-to-firestore"><a href="#uploading-data-to-firestore" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Uploading Data to Firestore</h2><p>We can create a method in the <code>firebaseUtils</code> file to upload data to Firestore.</p><p>See docs here: <a target="_blank" rel="noopener noreferrer" href="https://firebase.google.com/docs/firestore/manage-data/add-data">https://firebase.google.com/docs/firestore/manage-data/add-data</a></p><p>Start off by importing the <code>collection</code> and <code>writeBatch</code> functions from the <code>firebase</code> package.</p><ul><li><code>collection</code> - gets a reference to a collection</li><li><code>writeBatch</code> - allows you to write multiple documents to a collection in a single batch</li></ul><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getFirestore<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> setDoc<span class="token punctuation">,</span> getDoc<span class="token punctuation">,</span> collection<span class="token punctuation">,</span> writeBatch <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;firebase/firestore&#x27;</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function function-variable">addCollectionAndDocuments</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">collectionKey<span class="token punctuation">,</span> objectsToAdd</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">//...</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p><code>collectionKey</code> is the name of the collection. <code>objectsToAdd</code> is an array of objects. We want to add each object to the collection.</p><p>When we write to the database, we are completing a <em>transaction</em>. Think of a transaction as a series of steps, writing each collection to the db. There are numerous writes in a single transaction.</p><p>We can use the <code>writeBatch</code> function to write multiple documents to a collection in a single batch. This would be a single transaction.</p><p>If a single write fails, the entire transaction <strong>fails</strong>. We need to make sure all the writes are successful.</p><p>more on <a target="_blank" rel="noopener noreferrer" href="https://firebase.google.com/docs/reference/js/v8/firebase.firestore.WriteBatch?hl=en">writeBatch</a></p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// firestore - database</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">getFirestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token comment">// adding a collection to firestore</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function function-variable">addCollectionAndDocuments</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">collectionKey<span class="token punctuation">,</span> objectsToAdd</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// create a collection reference using the db we created above</span>
</span><span class="code-line">  <span class="token keyword">const</span> collectionRef <span class="token operator">=</span> <span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> collectionKey<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token comment">// use a batch to write multiple documents at once</span>
</span><span class="code-line">  <span class="token keyword">const</span> batch <span class="token operator">=</span> <span class="token function">writeBatch</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span>
</span><span class="code-line">  objectsToAdd<span class="token punctuation">.</span><span class="token function property-access method">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// create a new document reference</span>
</span><span class="code-line">    <span class="token keyword">const</span> newDocRef <span class="token operator">=</span> <span class="token function">doc</span><span class="token punctuation">(</span>collectionRef<span class="token punctuation">,</span> obj<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">.</span><span class="token function property-access method">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token comment">// add the object to the batch</span>
</span><span class="code-line">    batch<span class="token punctuation">.</span><span class="token function property-access method">set</span><span class="token punctuation">(</span>newDocRef<span class="token punctuation">,</span> obj<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token comment">// begins the batch write</span>
</span><span class="code-line">  <span class="token keyword control-flow">await</span> batch<span class="token punctuation">.</span><span class="token function property-access method">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token class-name console">console</span><span class="token punctuation">.</span><span class="token function property-access method">log</span><span class="token punctuation">(</span><span class="token string">&#x27;batch write complete&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>We can do a <code>forEach</code> loop over the <code>objectsToAdd</code> array. For each object, we create a new document reference. We add the object to the batch. Once we have added all the objects to the batch, we can commit the batch.</p><p>You can import the <code>addCollectionAndDocuments</code> into the <code>App.js</code> file and call it. Only call it once and delete it afterwards.</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token constant">SOME_DATA</span> <span class="token keyword module">from</span> <span class="token string">&#x27;./data/some-data.js&#x27;</span>
</span><span class="code-line"><span class="token comment">// SOME_DATA is an array of objects</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> addCollectionAndDocuments <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;./firebase/firebase.utils&#x27;</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">addCollectionAndDocuments</span><span class="token punctuation">(</span><span class="token string">&#x27;collections&#x27;</span><span class="token punctuation">,</span> <span class="token constant">SOME_DATA</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h2 id="reading-data-from-firestore"><a href="#reading-data-from-firestore" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Reading Data from Firestore</h2><p>Now we need to pull data from Firestore and use them in our app.</p><p>We need the <code>query</code> and <code>getDocs</code> functions from the <code>firebase/firestore</code> package.</p><ul><li><code>query</code> - creates a query against a collection or collection group.</li><li><code>getDocs</code> - gets all the documents from a collection that match the query.</li></ul><p>The object we get back from <code>getDocs</code> is a <code>QuerySnapshot</code>. We can use the <code>docs</code> property to get an array of documents.</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// get a document from firestore</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function function-variable">getCategoriesAndDocuments</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> collectionRef <span class="token operator">=</span> <span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&#x27;categories&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>collectionRef<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span> <span class="token comment">// can use this to access the data</span>
</span><span class="code-line">  <span class="token class-name console">console</span><span class="token punctuation">.</span><span class="token function property-access method">log</span><span class="token punctuation">(</span><span class="token string">&#x27;querySnapshot&#x27;</span><span class="token punctuation">,</span> querySnapshot<span class="token punctuation">.</span><span class="token property-access">docs</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function property-access method">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token comment">// {</span>
</span><span class="code-line">  <span class="token comment">//   &quot;items&quot;: [</span>
</span><span class="code-line">  <span class="token comment">//       {</span>
</span><span class="code-line">  <span class="token comment">//           &quot;id&quot;: 1,</span>
</span><span class="code-line">  <span class="token comment">//           &quot;name&quot;: &quot;Brown Brim&quot;,</span>
</span><span class="code-line">  <span class="token comment">//           &quot;price&quot;: 25,</span>
</span><span class="code-line">  <span class="token comment">//           &quot;imageUrl&quot;: &quot;https://i.ibb.co/ZYW3VTp/brown-brim.png&quot;</span>
</span><span class="code-line">  <span class="token comment">//       },</span>
</span><span class="code-line">  <span class="token comment">//       {</span>
</span><span class="code-line">  <span class="token comment">//           &quot;name&quot;: &quot;Blue Beanie&quot;,</span>
</span><span class="code-line">  <span class="token comment">//           &quot;id&quot;: 2,</span>
</span><span class="code-line">  <span class="token comment">//           &quot;imageUrl&quot;: &quot;https://i.ibb.co/ypkgK0X/blue-beanie.png&quot;,</span>
</span><span class="code-line">  <span class="token comment">//           &quot;price&quot;: 18</span>
</span><span class="code-line">  <span class="token comment">//       },</span>
</span><span class="code-line">  <span class="token comment">//       //...</span>
</span><span class="code-line">  <span class="token comment">//   ],</span>
</span><span class="code-line">  <span class="token comment">//   &quot;title&quot;: &quot;Hats&quot;</span>
</span><span class="code-line">  <span class="token comment">// }</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>Completed:</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// get a document from firestore</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function function-variable">getCategoriesAndDocuments</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> collectionRef <span class="token operator">=</span> <span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&#x27;categories&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>collectionRef<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span> <span class="token comment">// can use this to access the data</span>
</span><span class="code-line">  <span class="token keyword">const</span> categoryMap <span class="token operator">=</span> querySnapshot<span class="token punctuation">.</span><span class="token property-access">docs</span><span class="token punctuation">.</span><span class="token function property-access method">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> docSnapshot</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> items <span class="token punctuation">}</span> <span class="token operator">=</span> docSnapshot<span class="token punctuation">.</span><span class="token function property-access method">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    acc<span class="token punctuation">[</span>title<span class="token punctuation">.</span><span class="token function property-access method">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> items
</span><span class="code-line">    <span class="token keyword control-flow">return</span> acc
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> categoryMap
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><blockquote><p>The main purpose of this helper function is to get the data from Firestore and convert it into the shape we need. This allows us to have a single source of truth for our data. We can use the data from Firestore in our app.</p></blockquote></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/firebase">Firebase</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/database">Database</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/authentication">Authentication</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/cdn-and-server-side-rendering">CDN Caching, Static Site Generation and Server Side Rendering</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/redux-toolkit">Redux Toolkit</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-10 mb-4 flex flex-col items-center justify-between md:flex-row"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/giosoares1010"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-5 w-5"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:gioarmstr11@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-5 w-5"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/giovanni-soares-818b02327"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-5 w-5"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div><div class="mb-3 flex space-x-2 text-sm text-gray-500 dark:text-gray-400">I am ready to be hired at anytime, Have a good <!-- -->Thursday<!-- -->!</div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var d=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var o=a=\u003et(a,\"__esModule\",{value:!0});var N=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),k=(a,s)=\u003e{o(a);for(var c in s)t(a,c,{get:s[c],enumerable:!0})},f=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of h(s))!u.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026t(a,n,{get:()=\u003es[n],enumerable:!(c=p(s,n))||c.enumerable});return a},g=a=\u003ef(o(t(a!=null?d(m(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=N((j,i)=\u003e{i.exports=_jsx_runtime});var v={};k(v,{default:()=\u003eb,frontmatter:()=\u003ew});var e=g(r()),w={title:\"Firebase - Authentication and Database\",date:\"2022-10-27\",tags:[\"Firebase\",\"Database\",\"Authentication\"],draft:!1,summary:\"Basics of using Firebase for authentication and database storage. Covers how to set up a project, create a database, and authenticate users in a React app.\"};function y(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",p:\"p\",code:\"code\",pre:\"pre\",h2:\"h2\",h3:\"h3\",blockquote:\"blockquote\",h4:\"h4\",strong:\"strong\",ul:\"ul\",li:\"li\",div:\"div\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\",em:\"em\"},a.components),{Image:l}=n;return l||A(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h1,{id:\"firebase-configuration\",children:[(0,e.jsx)(n.a,{href:\"#firebase-configuration\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Firebase Configuration\"]}),(0,e.jsxs)(n.p,{children:[\"It's a good idea to create a separate file for your Firebase configuration. This will keep your Firebase credentials secure and out of your code. You can create a new file in your \",(0,e.jsx)(n.code,{children:\"src\"}),\" folder called \",(0,e.jsx)(n.code,{children:\"firebaseUtils.js\"}),\". This file will contain your Firebase configuration.\"]}),(0,e.jsx)(n.p,{children:\"Install the Firebase SDK for React.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` firebase\n`]})})}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" initializeApp \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'firebase/app'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// initialize the app and create the Firebase App object\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" firebaseConfig \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"apiKey\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// ... put in your Firebase config here after creating a project\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"authDomain\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// ...\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"projectId\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// ...\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"storageBucket\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// ...\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"messagingSenderId\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// ...\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"appId\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// ...\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Initialize Firebase\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" firebaseApp \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"initializeApp\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"firebaseConfig\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"authentication\",children:[(0,e.jsx)(n.a,{href:\"#authentication\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Authentication\"]}),(0,e.jsx)(n.p,{children:\"You can use authentication in a number of ways. You can use email and password, Google, Facebook, Twitter, and more. You can also use authentication with a custom backend. For this example, I will use email and password authentication.\"}),(0,e.jsx)(n.p,{children:\"You can configure an option in the Firebase console in the Authentication section under 'Sign-in method'.\"}),(0,e.jsxs)(n.h3,{id:\"authenticate-using-google\",children:[(0,e.jsx)(n.a,{href:\"#authenticate-using-google\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Authenticate Using Google\"]}),(0,e.jsx)(n.p,{children:\"You can use Google authentication to allow users to sign in with their Google account.\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// import the GoogleAuthProvider\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"GoogleAuthProvider\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'firebase/auth'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" provider \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"GoogleAuthProvider\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"googleProvider\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"setCustomParameters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"prompt\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'select_account'\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsx)(n.blockquote,{children:(0,e.jsxs)(n.p,{children:[\"The provider is a GoogleAuthProvider object. You can use this object to set custom parameters. In this case, I am setting the prompt to 'select_account' so that the user is prompted to select their account if they are already signed in to multiple Google accounts. You will also need a few other functions from the \",(0,e.jsx)(n.code,{children:\"firebase/auth\"}),\" package.\"]})}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  getAuth\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create an instance of the auth service\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  signInWithPopup\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// sign in with a popup window\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  signInWithRedirect\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// sign in with a redirect - requires some additional configuration\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"GoogleAuthProvider\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// the GoogleAuthProvider class\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  createUserWithEmailAndPassword\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create a user with email and password\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  signInWithEmailAndPassword\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// sign in with email and password\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  signOut\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// sign out\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'firebase/auth'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// time to create the auth instance and use it to sign in with Google\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" auth \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getAuth\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"signInWithGooglePopup\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"signInWithPopup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"auth\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" googleProvider\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// sign in with a popup window\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"signInWithGoogleRedirect\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"signInWithRedirect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"auth\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" googleProvider\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// sign in with a redirect\"}),`\n`]})]})}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"You can use these inside other components to sign in with Google.\"})}),(0,e.jsxs)(n.h4,{id:\"using-the-redirect-method\",children:[(0,e.jsx)(n.a,{href:\"#using-the-redirect-method\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Using the redirect method\"]}),(0,e.jsxs)(n.p,{children:[\"When you redirect a user to a new page and then back to your app, you need to handle the results of the redirect. This was done by using \",(0,e.jsx)(n.code,{children:\"useEffect\"}),\" and the \",(0,e.jsx)(n.code,{children:\"getRedirectResult\"}),\" method.\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" setCurrentUser \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useContext\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// created a context to store the current user\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"useEffect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"handleRedirectResult\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// get the redirect result from the signInWithGoogleRedirect() function\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" response \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getRedirectResult\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"auth\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create a user document in the firestore database\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createUserDocumentFromAuth\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"user\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// set the current user in the UserContext\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setCurrentUser\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"user\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"handleRedirectResult\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"signInGoogleRedirectUser\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" user \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"signInWithGoogleRedirect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// triggers the useEffect() hook above\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createUserDocumentFromAuth\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// gets called when the user clicks the button to sign in with Google\"}),`\n`]})]})}),(0,e.jsx)(n.blockquote,{children:(0,e.jsxs)(n.p,{children:[\"This was done in a separate component called \",(0,e.jsx)(n.code,{children:\"Authenticate.jsx\"}),\".\"]})}),(0,e.jsxs)(n.h4,{id:\"signing-in-with-email-and-password\",children:[(0,e.jsx)(n.a,{href:\"#signing-in-with-email-and-password\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Signing in with email and password\"]}),(0,e.jsxs)(n.p,{children:[\"Is similar to signing in with Google. You will need to import the \",(0,e.jsx)(n.code,{children:\"signInAuthUserWithEmailAndPassword\"}),\" functions from your \",(0,e.jsx)(n.code,{children:\"firebaseUtils.js\"}),\" file.\"]}),(0,e.jsxs)(n.p,{children:[\"Recall, the \",(0,e.jsx)(n.code,{children:\"signInAuthUserWithEmailAndPassword\"}),\" function is defined as follows:\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Sign in with Firebase using Password-Based Accounts\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"signInAuthUserWithEmailAndPassword\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"email\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" password\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),\"email \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),\"password\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"signInWithEmailAndPassword\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"auth\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" email\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" password\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"Back in your \",(0,e.jsx)(n.code,{children:\"Authenticate.jsx\"}),\" component:\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  auth\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// the auth instance\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  signInWithGoogleRedirect\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// sign in with a redirect\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  signInAuthUserWithEmailAndPassword\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// sign in with email and password\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'../utils/firebase/firebaseUtils'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// called when the user submits the form\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"handleSubmit\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  e\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"preventDefault\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// sign in with email and password\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" response \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"signInAuthUserWithEmailAndPassword\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"email\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" password\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token function\",children:\"resetFormFields\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'successful sign in \\u2705 '\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setCurrentUser\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"user\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"error\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// error handling\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"switch\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"code\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"case\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'auth/user-not-found'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setErrorText\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'No existing user found with that email address'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setTimeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setErrorText\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword nil null\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"break\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"case\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'auth/wrong-password'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setErrorText\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Incorrect password'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setTimeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setErrorText\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword nil null\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"break\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setErrorText\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Something went wrong'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"The \",(0,e.jsx)(n.code,{children:\"handleSubmit\"}),\" function gets called when the user submits the form. It will call the \",(0,e.jsx)(n.code,{children:\"signInAuthUserWithEmailAndPassword\"}),\" function. It takes in the email and password from the form.\"]}),(0,e.jsxs)(n.p,{children:[\"If the user is successfully signed in, the \",(0,e.jsx)(n.code,{children:\"setCurrentUser\"}),\" function will be called. This will set the current user in the UserContext.\"]}),(0,e.jsxs)(n.p,{children:[\"I have created a few \",(0,e.jsx)(n.code,{children:\"switch\"}),\" cases to handle errors, but this is not necessary. You can just use the \",(0,e.jsx)(n.code,{children:\"error.message\"}),\" property to display the error message.\"]}),(0,e.jsxs)(n.h2,{id:\"signing-up-with-email-and-password---creating-a-new-user\",children:[(0,e.jsx)(n.a,{href:\"#signing-up-with-email-and-password---creating-a-new-user\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Signing Up with email and password - Creating a new user\"]}),(0,e.jsx)(n.p,{children:\"You may need to create a new user for your application.\"}),(0,e.jsxs)(n.p,{children:[\"Very very similar to signing in with email and password. You will need to import the \",(0,e.jsx)(n.code,{children:\"createAuthUserWithEmailAndPassword\"}),\" and \",(0,e.jsx)(n.code,{children:\"createUserDocumentFromAuth\"}),\" function from your \",(0,e.jsx)(n.code,{children:\"firebaseUtils.js\"}),\" file.\"]}),(0,e.jsxs)(n.p,{children:[\"I created a new component to handle signing up and named it \",(0,e.jsx)(n.code,{children:\"SignUp.jsx\"}),\".\"]}),(0,e.jsx)(n.p,{children:\"We need to import the `c\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  createAuthUserWithEmailAndPassword\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create a user with email and password\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  createUserDocumentFromAuth\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'../utils/firebase/firebaseUtils'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// gets called when the user submits the form\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"handleSubmit\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  e\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"preventDefault\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" response \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createAuthUserWithEmailAndPassword\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"email\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" password\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create a user document in the firestore database\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// also pass the displayName from the form. This is passed as an additionalInformationObj to the createUserDocumentFromAuth() function\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createUserDocumentFromAuth\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"user\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" displayName \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'successful sign up \\u2705 '\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setCurrentUser\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"user\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"switch\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"code\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"case\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'auth/email-already-in-use'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setErrorText\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Email already in use'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"break\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"case\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'auth/invalid-email'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setErrorText\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Invalid email'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"break\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"case\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'auth/weak-password'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setErrorText\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Password is too weak'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"break\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setErrorText\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Something went wrong'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setTimeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setErrorText\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword nil null\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"error\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"observable-listener\",children:[(0,e.jsx)(n.a,{href:\"#observable-listener\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Observable Listener\"]}),(0,e.jsx)(n.p,{children:\"Is a function that listens for changes in the authentication state. It will be called every time the authentication state changes. Our code is getting a little messy.\"}),(0,e.jsxs)(n.p,{children:[\"We can use the \",(0,e.jsx)(n.code,{children:\"onAuthStateChanged\"}),\" function to listen for changes in the authentication state. This function will be called every time the authentication state changes.\"]}),(0,e.jsxs)(n.p,{children:[\"Read more about the \",(0,e.jsx)(n.code,{children:\"onAuthStateChanged\"}),\" function \",(0,e.jsx)(n.a,{href:\"https://firebase.google.com/docs/reference/js/firebase.auth.Auth#onauthstatechanged\",children:\"here\"}),\".\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// inside firebaseUtils.js\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// observer - Adds an observer for changes to the user's sign-in state.\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"onAuthStateChangedListener\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"callback\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"onAuthStateChanged\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"auth\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" callback\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"Will import this in our \",(0,e.jsx)(n.code,{children:\"userContext\"}),\" file. We want to run the \",(0,e.jsx)(n.code,{children:\"onAuthStateChangedListener\"}),\" function when the app loads. We will do this in the \",(0,e.jsx)(n.code,{children:\"UserProvider\"}),\" component by using the \",(0,e.jsx)(n.code,{children:\"useEffect\"}),\" hook.\"]}),(0,e.jsxs)(n.p,{children:[\"We use can run the callback method whenever out \",(0,e.jsx)(n.code,{children:\"auth\"}),\" state changes. This will be called every time the authentication state changes. So when a user signs in or signs out, this callback function will be called.\"]}),(0,e.jsxs)(n.p,{children:[\"The \",(0,e.jsx)(n.code,{children:\"onAuthStateChanged\"}),\" is \",(0,e.jsx)(n.strong,{children:\"always\"}),\" listening for changes in the authentication state. You need this to unmount\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// inside userContext.js\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" createContext\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" useState\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" useEffect \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" onAuthStateChangedListener \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'../utils/firebase/firebaseUtils'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// the actual value of the context is an object\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createContext\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"currentUser\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword nil null\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"setCurrentUser\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword nil null\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// provider component\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"UserProvider\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" children \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// the initial state of the user context, base, empty state\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"currentUser\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" setCurrentUser\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useState\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword nil null\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// allows you to pass the getter and setter functions to the children components\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" value \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" currentUser\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" setCurrentUser \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useEffect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// onAuthStateChangedListener() is a function that returns an unsubscribe function\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" unsubscribe \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"onAuthStateChangedListener\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"user\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setCurrentUser\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" unsubscribe \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// unsubscribe from the listener when the component unmounts\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Provider\"})}),\" value\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"children\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Provider\"})}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"We are going to modify our code to use the \",(0,e.jsx)(n.code,{children:\"onAuthStateChangedListener\"}),\" function. We will use the \",(0,e.jsx)(n.code,{children:\"onAuthStateChangedListener\"}),\" function to set the current user in the \",(0,e.jsx)(n.code,{children:\"UserContext\"}),\".\"]}),(0,e.jsxs)(n.p,{children:[\"We can remove all references to the \",(0,e.jsx)(n.code,{children:\"setCurrentUser\"}),\" function from our \",(0,e.jsx)(n.code,{children:\"Authenticate.jsx\"}),\" and \",(0,e.jsx)(n.code,{children:\"SignUp.jsx\"}),\" components because we are using the \",(0,e.jsx)(n.code,{children:\"onAuthStateChangedListener\"}),\" function to set the current user in the \",(0,e.jsx)(n.code,{children:\"UserContext\"}),\".\"]}),(0,e.jsxs)(n.p,{children:[\"We know when a user signs in, the \",(0,e.jsx)(n.code,{children:\"onAuthStateChangedListener\"}),\" function will be called, the callback \",(0,e.jsx)(n.code,{children:\"(user) =\u003e {setCurrentUser(user)}\"}),\" will be called. This will set the current user in the \",(0,e.jsx)(n.code,{children:\"UserContext\"}),\".\"]}),(0,e.jsxs)(n.p,{children:[\"If a user signs out, the \",(0,e.jsx)(n.code,{children:\"onAuthStateChangedListener\"}),\" function will be called, the callback \",(0,e.jsx)(n.code,{children:\"(user) =\u003e {setCurrentUser(user)}\"}),\" will be called. This will set the current user in the \",(0,e.jsx)(n.code,{children:\"UserContext\"}),\" to \",(0,e.jsx)(n.code,{children:\"null\"}),\".\"]}),(0,e.jsx)(n.p,{children:\"Why would you do this?\"}),(0,e.jsxs)(n.p,{children:[\"You can use the \",(0,e.jsx)(n.code,{children:\"onAuthStateChanged\"}),\" function to centralize all the user authentication logic into the \",(0,e.jsx)(n.code,{children:\"UserContext\"}),\" file. This will make your code cleaner and easier to maintain. We are not needing to pass the \",(0,e.jsx)(n.code,{children:\"setCurrentUser\"}),\" function down to the child components. We simply use the \",(0,e.jsx)(n.code,{children:\"onAuthStateChanged\"}),\" function to set the current user in the \",(0,e.jsx)(n.code,{children:\"UserContext\"}),\".\"]}),(0,e.jsxs)(n.h4,{id:\"observer-pattern\",children:[(0,e.jsx)(n.a,{href:\"#observer-pattern\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Observer Pattern\"]}),(0,e.jsxs)(n.p,{children:[\"Think of the \",(0,e.jsx)(n.code,{children:\"onAuthStateChanged\"}),\" as a stream, a sequence of events in order of time. There is a variable, unknown number of time between events.\"]}),(0,e.jsxs)(n.p,{children:[\"We can use a listener to listen for changes in the authentication state. We can use the \",(0,e.jsx)(n.code,{children:\"onAuthStateChanged\"}),\" function to listen for changes in the authentication state. This function will be called every time the authentication state changes.\"]}),(0,e.jsx)(n.p,{children:\"The listener has three key methods:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"next\"}),\" - is called every time a new event is emitted. It points to the callback function.\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"error\"}),\" - is called when an error occurs. It points to the error callback function.\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"complete\"}),\" - is called when the stream is has ended. You can use this to do something when finished.\"]})]}),(0,e.jsxs)(n.p,{children:[\"So, we need a way to subscribe the listener to the stream. We want to run the \",(0,e.jsx)(n.code,{children:\"next\"}),\" method every time a new event is emitted. However, by the time we subscribe to the stream, the stream may have already emitted some events.\"]}),(0,e.jsx)(\"div\",{className:\"flex justify-center\",children:(0,e.jsx)(n.div,{children:(0,e.jsx)(l,{alt:\"streams\",src:\"/static/images/steams.svg\",width:\"763\",height:\"105\"})})}),(0,e.jsxs)(n.p,{children:[\"This is a pretty simple logic. Once we get an event, we fire \",(0,e.jsx)(n.code,{children:\"next\"}),\". Once we run the \",(0,e.jsx)(n.code,{children:\"complete\"}),\" method, we unsubscribe from the stream.\"]}),(0,e.jsxs)(n.p,{children:[\"We see this in our \",(0,e.jsx)(n.code,{children:\"UserContext\"}),\" file. We are using the \",(0,e.jsx)(n.code,{children:\"useEffect\"}),\" hook to run the \",(0,e.jsx)(n.code,{children:\"onAuthStateChangedListener\"}),\" function. This function will be called every time the authentication state changes.\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"useEffect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// onAuthStateChangedListener() is a function that returns an unsubscribe function\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" unsubscribe \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"onAuthStateChangedListener\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"user\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createUserDocumentFromAuth\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// set the current user in the UserContext\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setCurrentUser\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// clean up function\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" unsubscribe \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// unsubscribe from the listener when the component unmounts\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsxs)(n.h1,{id:\"firestore-database\",children:[(0,e.jsx)(n.a,{href:\"#firestore-database\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Firestore Database\"]}),(0,e.jsx)(n.p,{children:\"It's a bad idea to store large amounts of data on the front end. We can use Firestore, a NoSQL database, to store our data.\"}),(0,e.jsxs)(n.h2,{id:\"general-structure-of-a-firestore-database\",children:[(0,e.jsx)(n.a,{href:\"#general-structure-of-a-firestore-database\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"General Structure of a Firestore Database\"]}),(0,e.jsx)(n.p,{children:\"In general, we have two types of databases:\"}),(0,e.jsxs)(n.table,{children:[(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:\"Relational Database (SQL)\"}),(0,e.jsx)(n.th,{children:\"NoSQL Database\"})]})}),(0,e.jsxs)(n.tbody,{children:[(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"Data is stored in tables\"}),(0,e.jsx)(n.td,{children:\"Data is stored in collections\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"Data is related to each\"}),(0,e.jsx)(n.td,{children:\"Data is not related to each other\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"Data is structured. Each item in a table will have the same shape.\"}),(0,e.jsx)(n.td,{children:\"Data is not structured. Documents can have different shapes.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"PostgreSQL, MySQL, Supabase\"}),(0,e.jsx)(n.td,{children:\"MongoDB, Firestore\"})]})]})]}),(0,e.jsx)(n.p,{children:\"In a NoSQL database, we have collections and documents. A collection is a group of documents. A document is a single record.\"}),(0,e.jsx)(n.p,{children:\"We can easily add any property to a document. We can add a new property to a document without having to change the structure of the document.\"}),(0,e.jsx)(\"div\",{className:\"flex justify-center\",children:(0,e.jsx)(n.div,{children:(0,e.jsx)(l,{alt:\"adding to NoSQL\",src:\"/static/images/firestore-1.png\",width:\"2098\",height:\"1610\"})})}),(0,e.jsx)(n.p,{children:\"WHen using a NoSQL database you need to think about how you are going to structure your data. You need to think about how you are going to query your data.For example, in order to predictably map over a collection of documents, you need to ensure the documents have the same shape. If you don't have the same shape, you will need to do some extra work to map over the collection.\"}),(0,e.jsxs)(n.h2,{id:\"uploading-data-to-firestore\",children:[(0,e.jsx)(n.a,{href:\"#uploading-data-to-firestore\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Uploading Data to Firestore\"]}),(0,e.jsxs)(n.p,{children:[\"We can create a method in the \",(0,e.jsx)(n.code,{children:\"firebaseUtils\"}),\" file to upload data to Firestore.\"]}),(0,e.jsxs)(n.p,{children:[\"See docs here: \",(0,e.jsx)(n.a,{href:\"https://firebase.google.com/docs/firestore/manage-data/add-data\",children:\"https://firebase.google.com/docs/firestore/manage-data/add-data\"})]}),(0,e.jsxs)(n.p,{children:[\"Start off by importing the \",(0,e.jsx)(n.code,{children:\"collection\"}),\" and \",(0,e.jsx)(n.code,{children:\"writeBatch\"}),\" functions from the \",(0,e.jsx)(n.code,{children:\"firebase\"}),\" package.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"collection\"}),\" - gets a reference to a collection\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"writeBatch\"}),\" - allows you to write multiple documents to a collection in a single batch\"]})]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" getFirestore\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" doc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" setDoc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" getDoc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" collection\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" writeBatch \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'firebase/firestore'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"addCollectionAndDocuments\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"collectionKey\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" objectsToAdd\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//...\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"collectionKey\"}),\" is the name of the collection. \",(0,e.jsx)(n.code,{children:\"objectsToAdd\"}),\" is an array of objects. We want to add each object to the collection.\"]}),(0,e.jsxs)(n.p,{children:[\"When we write to the database, we are completing a \",(0,e.jsx)(n.em,{children:\"transaction\"}),\". Think of a transaction as a series of steps, writing each collection to the db. There are numerous writes in a single transaction.\"]}),(0,e.jsxs)(n.p,{children:[\"We can use the \",(0,e.jsx)(n.code,{children:\"writeBatch\"}),\" function to write multiple documents to a collection in a single batch. This would be a single transaction.\"]}),(0,e.jsxs)(n.p,{children:[\"If a single write fails, the entire transaction \",(0,e.jsx)(n.strong,{children:\"fails\"}),\". We need to make sure all the writes are successful.\"]}),(0,e.jsxs)(n.p,{children:[\"more on \",(0,e.jsx)(n.a,{href:\"https://firebase.google.com/docs/reference/js/v8/firebase.firestore.WriteBatch?hl=en\",children:\"writeBatch\"})]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// firestore - database\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" db \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getFirestore\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// adding a collection to firestore\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"addCollectionAndDocuments\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"collectionKey\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" objectsToAdd\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create a collection reference using the db we created above\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" collectionRef \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"collection\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"db\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" collectionKey\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// use a batch to write multiple documents at once\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" batch \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"writeBatch\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"db\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  objectsToAdd\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"forEach\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"obj\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create a new document reference\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" newDocRef \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"doc\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"collectionRef\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" obj\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"title\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"toLowerCase\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// add the object to the batch\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    batch\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"set\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"newDocRef\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" obj\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// begins the batch write\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" batch\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"commit\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'batch write complete'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"We can do a \",(0,e.jsx)(n.code,{children:\"forEach\"}),\" loop over the \",(0,e.jsx)(n.code,{children:\"objectsToAdd\"}),\" array. For each object, we create a new document reference. We add the object to the batch. Once we have added all the objects to the batch, we can commit the batch.\"]}),(0,e.jsxs)(n.p,{children:[\"You can import the \",(0,e.jsx)(n.code,{children:\"addCollectionAndDocuments\"}),\" into the \",(0,e.jsx)(n.code,{children:\"App.js\"}),\" file and call it. Only call it once and delete it afterwards.\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"SOME_DATA\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'./data/some-data.js'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// SOME_DATA is an array of objects\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" addCollectionAndDocuments \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'./firebase/firebase.utils'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"App\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useEffect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"addCollectionAndDocuments\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'collections'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"SOME_DATA\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"reading-data-from-firestore\",children:[(0,e.jsx)(n.a,{href:\"#reading-data-from-firestore\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Reading Data from Firestore\"]}),(0,e.jsx)(n.p,{children:\"Now we need to pull data from Firestore and use them in our app.\"}),(0,e.jsxs)(n.p,{children:[\"We need the \",(0,e.jsx)(n.code,{children:\"query\"}),\" and \",(0,e.jsx)(n.code,{children:\"getDocs\"}),\" functions from the \",(0,e.jsx)(n.code,{children:\"firebase/firestore\"}),\" package.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"query\"}),\" - creates a query against a collection or collection group.\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"getDocs\"}),\" - gets all the documents from a collection that match the query.\"]})]}),(0,e.jsxs)(n.p,{children:[\"The object we get back from \",(0,e.jsx)(n.code,{children:\"getDocs\"}),\" is a \",(0,e.jsx)(n.code,{children:\"QuerySnapshot\"}),\". We can use the \",(0,e.jsx)(n.code,{children:\"docs\"}),\" property to get an array of documents.\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// get a document from firestore\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"getCategoriesAndDocuments\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" collectionRef \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"collection\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"db\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'categories'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" q \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"collectionRef\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" querySnapshot \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getDocs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"q\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// can use this to access the data\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'querySnapshot'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" querySnapshot\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"docs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// {\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'//   \"items\": ['}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//       {\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'//           \"id\": 1,'}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'//           \"name\": \"Brown Brim\",'}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'//           \"price\": 25,'}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'//           \"imageUrl\": \"https://i.ibb.co/ZYW3VTp/brown-brim.png\"'}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//       },\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//       {\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'//           \"name\": \"Blue Beanie\",'}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'//           \"id\": 2,'}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'//           \"imageUrl\": \"https://i.ibb.co/ypkgK0X/blue-beanie.png\",'}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'//           \"price\": 18'}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//       },\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//       //...\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//   ],\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'//   \"title\": \"Hats\"'}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// }\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"Completed:\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// get a document from firestore\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"getCategoriesAndDocuments\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" collectionRef \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"collection\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"db\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'categories'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" q \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"collectionRef\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" querySnapshot \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getDocs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"q\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// can use this to access the data\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" categoryMap \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" querySnapshot\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"docs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"reduce\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"acc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" docSnapshot\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" items \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" docSnapshot\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    acc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"toLowerCase\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` items\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),` acc\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),` categoryMap\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"The main purpose of this helper function is to get the data from Firestore and convert it into the shape we need. This allows us to have a single source of truth for our data. We can use the data from Firestore in our app.\"})})]})}}var b=y;function A(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return v;})();\n;return Component;","toc":[{"value":"Firebase Configuration","url":"#firebase-configuration","depth":1},{"value":"Authentication","url":"#authentication","depth":2},{"value":"Authenticate Using Google","url":"#authenticate-using-google","depth":3},{"value":"Using the redirect method","url":"#using-the-redirect-method","depth":4},{"value":"Signing in with email and password","url":"#signing-in-with-email-and-password","depth":4},{"value":"Signing Up with email and password - Creating a new user","url":"#signing-up-with-email-and-password---creating-a-new-user","depth":2},{"value":"Observable Listener","url":"#observable-listener","depth":2},{"value":"Observer Pattern","url":"#observer-pattern","depth":4},{"value":"Firestore Database","url":"#firestore-database","depth":1},{"value":"General Structure of a Firestore Database","url":"#general-structure-of-a-firestore-database","depth":2},{"value":"Uploading Data to Firestore","url":"#uploading-data-to-firestore","depth":2},{"value":"Reading Data from Firestore","url":"#reading-data-from-firestore","depth":2}],"frontMatter":{"readingTime":{"text":"20 min read","minutes":19.03,"time":1141800,"words":3806},"slug":"firebase","fileName":"firebase.mdx","title":"Firebase - Authentication and Database","date":"2022-10-27T00:00:00.000Z","tags":["Firebase","Database","Authentication"],"draft":false,"summary":"Basics of using Firebase for authentication and database storage. Covers how to set up a project, create a database, and authenticate users in a React app."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.76,"time":45600,"words":152},"slug":["default"],"fileName":"default.md","name":"Giovanni Soares","avatar":"/static/images/photo.jpg","occupation":"Senior Web Developer \u0026 Software Engineer","company":null,"email":"gioarmstr11@gmail.com","twitter":null,"linkedin":null,"github":"https://github.com/giosoares1010","date":null}],"prev":{"title":"CDN Caching, Static Site Generation and Server Side Rendering","summary":"Here we are analyzing the different types of pre rendering a website and its combination with a CDN.","date":"2022-09-04T00:00:00.000Z","tags":["static-site-generation","server-side-rendering","cdn","cache"],"images":["/static/images/cdn-and-server-side-rendering.png"],"draft":false,"urls":["https://dev.to/jmalvarez/cdn-caching-static-site-generation-and-server-side-rendering-4hom"],"dev_to":"https://dev.to/jmalvarez/cdn-caching-static-site-generation-and-server-side-rendering-4hom","slug":"cdn-and-server-side-rendering"},"next":{"title":"Redux Toolkit","date":"2022-11-02T00:00:00.000Z","tags":["Redux","RTK"],"draft":false,"summary":"Redux Toolkit is a library that helps you write Redux logic more easily. It requires much less boilerplate code than the classic Redux library. In this post, I will show you how to use Redux Toolkit to write Redux logic.","slug":"redux-toolkit"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["firebase"]},"buildId":"wwF2HbjoMRtoMasqAJl2E","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>